<!DOCTYPE html><html lang="ko" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="day-prompt" content="days ago"><meta name="hour-prompt" content="hours ago"><meta name="minute-prompt" content="minutes ago"><meta name="justnow-prompt" content="just now"><meta name="generator" content="Jekyll v4.2.2" /><meta property="og:title" content="Next JS를 공부해보자[1편]" /><meta name="author" content="Sanghun lee" /><meta property="og:locale" content="ko" /><meta name="description" content="Next JS" /><meta property="og:description" content="Next JS" /><link rel="canonical" href="https://sanghunlee-711.github.io//posts/nextjs_basic/" /><meta property="og:url" content="https://sanghunlee-711.github.io//posts/nextjs_basic/" /><meta property="og:site_name" content="Sanghun Lee" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2021-09-29T12:33:00+09:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="Next JS를 공부해보자[1편]" /><meta name="twitter:site" content="@twitter_username" /><meta name="twitter:creator" content="@Sanghun lee" /><meta name="google-site-verification" content="google_meta_tag_verification" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Sanghun lee"},"dateModified":"2021-12-07T23:45:06+09:00","datePublished":"2021-09-29T12:33:00+09:00","description":"Next JS","headline":"Next JS를 공부해보자[1편]","mainEntityOfPage":{"@type":"WebPage","@id":"https://sanghunlee-711.github.io//posts/nextjs_basic/"},"url":"https://sanghunlee-711.github.io//posts/nextjs_basic/"}</script><title>Next JS를 공부해보자[1편] | Sanghun Lee</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="Sanghun Lee"><meta name="application-name" content="Sanghun Lee"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://fonts.gstatic.com"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="preconnect" href="https://cdn.jsdelivr.net"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1.1.0/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script><body data-spy="scroll" data-target="#toc"><div id="sidebar" class="d-flex flex-column align-items-end" lang="en"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" alt="avatar" class="mx-auto"> <img src="https://avatars.githubusercontent.com/u/57477415?s=400&u=0a5560e77df7918587791bf3e05ed7f74cc313eb&v=4" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">Sanghun Lee</a></div><div class="site-subtitle font-italic">웹개발자 이상훈입니다.</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/resume/" class="nav-link"> <i class="fa-fw fas fa-file ml-xl-3 mr-xl-3 unloaded"></i> <span>RESUME</span> </a><li class="nav-item"> <a href="/portfolio/" class="nav-link"> <i class="fa-fw fas fa-newspaper ml-xl-3 mr-xl-3 unloaded"></i> <span>PORTFOLIO</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tags ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center"> <a href="https://github.com/sanghunlee-711" aria-label="github" class="order-3" target="_blank" rel="noopener"> <i class="fab fa-github-alt"></i> </a> <a href="https://twitter.com/twitter_username" aria-label="twitter" class="order-4" target="_blank" rel="noopener"> <i class="fab fa-twitter"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['cloudlee','gmail.com'].join('@')" aria-label="email" class="order-5" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" class="order-6" > <i class="fas fa-rss"></i> </a> <span class="icon-border order-2"></span> <span id="mode-toggle-wrapper" class="order-1"> <i class="mode-toggle fas fa-adjust"></i> <script type="text/javascript"> class ModeToggle { static get MODE_KEY() { return "mode"; } static get DARK_MODE() { return "dark"; } static get LIGHT_MODE() { return "light"; } constructor() { if (this.hasMode) { if (this.isDarkMode) { if (!this.isSysDarkPrefer) { this.setDark(); } } else { if (this.isSysDarkPrefer) { this.setLight(); } } } var self = this; /* always follow the system prefers */ this.sysDarkPrefers.addListener(function() { if (self.hasMode) { if (self.isDarkMode) { if (!self.isSysDarkPrefer) { self.setDark(); } } else { if (self.isSysDarkPrefer) { self.setLight(); } } self.clearMode(); } self.updateMermaid(); }); } /* constructor() */ setDark() { $('html').attr(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); } setLight() { $('html').attr(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); } clearMode() { $('html').removeAttr(ModeToggle.MODE_KEY); sessionStorage.removeItem(ModeToggle.MODE_KEY); } get sysDarkPrefers() { return window.matchMedia("(prefers-color-scheme: dark)"); } get isSysDarkPrefer() { return this.sysDarkPrefers.matches; } get isDarkMode() { return this.mode == ModeToggle.DARK_MODE; } get isLightMode() { return this.mode == ModeToggle.LIGHT_MODE; } get hasMode() { return this.mode != null; } get mode() { return sessionStorage.getItem(ModeToggle.MODE_KEY); } /* get the current mode on screen */ get modeStatus() { if (this.isDarkMode || (!this.hasMode && this.isSysDarkPrefer) ) { return ModeToggle.DARK_MODE; } else { return ModeToggle.LIGHT_MODE; } } updateMermaid() { if (typeof mermaid !== "undefined") { let expectedTheme = (this.modeStatus === ModeToggle.DARK_MODE? "dark" : "default"); let config = { theme: expectedTheme }; /* re-render the SVG › <https://github.com/mermaid-js/mermaid/issues/311#issuecomment-332557344> */ $(".mermaid").each(function() { let svgCode = $(this).prev().children().html(); $(this).removeAttr("data-processed"); $(this).html(svgCode); }); mermaid.initialize(config); mermaid.init(undefined, ".mermaid"); } } flipMode() { if (this.hasMode) { if (this.isSysDarkPrefer) { if (this.isLightMode) { this.clearMode(); } else { this.setLight(); } } else { if (this.isDarkMode) { this.clearMode(); } else { this.setDark(); } } } else { if (this.isSysDarkPrefer) { this.setLight(); } else { this.setDark(); } } this.updateMermaid(); } /* flipMode() */ } /* ModeToggle */ let toggle = new ModeToggle(); $(".mode-toggle").click(function() { toggle.flipMode(); }); </script> </span></div></div><div id="topbar-wrapper" class="row justify-content-center topbar-down"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> <a href="/"> Home </a> </span> <span>Next JS를 공부해보자[1편]</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..."> <i class="fa fa-times-circle fa-fw" id="search-cleaner"></i> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper"><div id="main"><div class="row"><div id="post-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><h1 data-toc-skip>Next JS를 공부해보자[1편]</h1><div class="post-meta text-muted d-flex flex-column"><div> <span class="semi-bold"> Sanghun lee </span> on <span class="timeago " data-toggle="tooltip" data-placement="bottom" title="Wed, Sep 29, 2021, 12:33 PM +0900" >Sep 29, 2021<i class="unloaded">2021-09-29T12:33:00+09:00</i> </span></div><div> <span> Updated <span class="timeago lastmod" data-toggle="tooltip" data-placement="bottom" title="Tue, Dec 7, 2021, 11:45 PM +0900" >Dec 7, 2021<i class="unloaded">2021-12-07T23:45:06+09:00</i> </span> </span> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="1771 words">9 min read</span></div></div><div class="post-content"> <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 850 585'%3E%3C/svg%3E" data-proofer-ignore data-src="https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2FcZDedj%2FbtraJzj53sn%2FHdUj1jQOUihHUy0oday6kK%2Fimg.png" class="preview-img" alt="Preview Image" width="850" height="585"><h1 id="next-js">Next JS</h1><h1 id="사용하는-이유">사용하는 이유</h1><p>개인 프로젝트로 재미있는 기능이 몇가지 존재하는 커뮤니티 사이트를 만들어볼 생각으로</p><p>백엔드는 Nest JS + TypeORM + Postgresql + Graphql/apollo</p><p>프론트는 CRA + Redux Toolkit + Redux Saga</p><p>로 진행하려 초기세팅을 마쳤었다.</p><p>Express로 간단하게 데모를 만들어본 뒤로는 NestJS만을 통해 필요한 서버를 구축하고 있는 상황이라 백엔드는 NestJS이외에 마땅한 대안이 떠오르지않았는데..(아무래 생각해도 최고다)</p><p>프론트의 경우 SEO와 SSR, CSR을 번갈아 쓸 수 있는 Next js의 유혹을 뿌리칠 수 없었고</p><p>무엇보다도 시장에서 수요가 꽤 있어 언젠가는 해야지 하는 생각을 가지고 있었다….</p><p>회사에서 쓰는 스택을 포기하고 NextJS와 SSR의 조합으로 진행하고 테스트 코드의 경우 Jest, MSW, Cypress, StoryBook을 가져가는게 맞는 것 같다고 판단을 내렸다.</p><ul><li>사실 Cypress는 회사에서 직접 도입하며 문제를 해결해보아 그나마 괜찮으나 Storybook은 조금 걱정이다</ul><p>여튼 커뮤니티의 유저를 늘리기 위해서는 SEO가 불가결할 것 같아 시도하게되는 Next JS이다 :) …</p><p>아래부터는 내가 진행하면서 헷갈리는 개념을 몇가지 정리해놓기 위한 포스팅의 목적이 크다!</p><h1 id="1-개념">1. 개념</h1><h2 id="11-css-router">1.1 CSS, Router</h2><p>일단 기본적으로 css in js 스타일링도 지원되고 scss, css등이 모두 정해진 위치(assets, pages, components 등)에 잘 두면 작동이 간편하게 된다.</p><p>이 맛에 프레임워크를 쓴다 ㅎㅎ…</p><p>공식문서에 있는 그대로 따라하면 좋은 것 같다. 나는 class toggle이 용이해보이는 classnames라는 패키지모듈을 별도로 설치해 사용하고</p><p>나머지는 scss와 css를 util화 하여 적절하게 사용하는 것이 좋다고 판단하고 있다.</p><h2 id="12-static-generation-vs-server-side-rendering">1.2. Static Generation vs Server Side Rendering</h2><p>Next js에서는 아래 두 컨셉을 페이지별로 필요에따라 마음대로 선택하여 사용할 수 있다.</p><h2 id="121-static-generation">1.2.1 Static Generation</h2><ul><li>HTML을 빌드타임에 미리 렌더링시키는것(pre-rendering)<li>미리 렌더된 HTML은 각 요청마다 재사용되게 된다.<li>개발모드에서는 Static Generation이라 하더라도 Server-side Rendering와 같이 각 요청(Request)마다 새롭게 생성<li><p>유저의 요청전에 필요한 페이지인 경우</p><ul><li>마케팅 페이지<li>블로그 게시물(이래서 쓴다)<li>E-commerce 제품 리스트<li>문서나 문서</ul><li>데이터를 미리 받아오는 등의 전처리가 필요한 경우 <code class="language-plaintext highlighter-rouge">getStaticProps</code> 라는 함수 안에서 필요한 로직을 실행하면 된다.</ul><h2 id="122-server-side-rendering">1.2.2 Server-side Rendering</h2><ul><li>각 요청마다 새로운 HTML을 생성해준다<li>별도 설정없이은 CDN캐시가 되지 않고 매 요청마다 서버에서 새로 계산을 해야하므로 시간이 <code class="language-plaintext highlighter-rouge">getStaticProps</code>에 비해 더 걸리게 된다.<li>매 요청에(request time)에 데이터를 가져와야 하는경우(빌드타임이아닌고 렌더 되기 전에 이미 완성이 되어있어야 하는 경우) <code class="language-plaintext highlighter-rouge">getServerSideProps</code> 를 사용하면 된다.<blockquote><p>When you need to fetch data at request time instead of build time</p></blockquote></ul><blockquote><p>You should use getServerSideProps only if you need to pre-render a page whose data must be fetched at request time. Time to first byte (TTFB) will be slower than getStaticProps because the server must compute the result on every request, and the result cannot be cached by a CDN without extra configuration.</p></blockquote><h2 id="123-client-side-rendering">1.2.3 Client-side Rendering</h2><ul><li>데이터를 pre-rendering할 필요가 없고 정적으로 미리 만들어진 사이트가 외부데이터를 필요로 하지 않을때<li><p>정적페이지가 로딩 된 다음 외부 데이터를 client의 js사용으로 나머지 부분을 채우게 만드는 방법</p><li>게시판 페이지등에 활용<li>dashboard는 유저의 개인 공간이기 때문에 SEO(검색엔진 최적화)가 필요가 없으므로 pre-render가 필요하지 않음<li>데이터가 수시로 업데이트되는 경우 활용하기</ul><h2 id="13-swr">1.3 SWR</h2><ul><li>Client side에서 데이터를 받아오기 위해 사용하는 Hook임<blockquote><p>It handles caching, revalidation, focus tracking, refetching on interval, and more.</p></blockquote></ul><h1 id="2-활용">2. 활용</h1><h2 id="21-static-generation">2.1 Static Generation</h2><p>Static Generation의 샘플이다.</p><p>getStaticProps를 적용하고 간단하게 만든 REST API를 통해 데이터를 미리 받아온다. HTML을 빌드타임에 렌더링시킨 뒤 보내게 된다.</p><p>재미있는 부분하나 utilStyle.headingMd등 약간 모듈같이 css를 활용할 수 있게 된 점이다.</p><div lang="tsx" class="language-tsx highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
</pre><td class="rouge-code"><pre><span class="k">import</span> <span class="nx">axios</span><span class="p">,</span> <span class="p">{</span> <span class="nx">AxiosResponse</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">axios</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="nx">Head</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">next/head</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="nx">Link</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">next/link</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="nx">Layout</span><span class="p">,</span> <span class="p">{</span> <span class="nx">siteTitle</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">../components/layout</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="nx">utilStyles</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">../styles/utils.module.css</span><span class="dl">"</span><span class="p">;</span>
<span class="c1">// 예시로 필요한 데이터를 보내기 위해 간단한 RESTAPI를 만들어 사용</span>
<span class="kr">interface</span> <span class="nx">DataTest</span> <span class="p">{</span>
  <span class="nl">date</span><span class="p">:</span> <span class="kr">string</span><span class="p">;</span>
  <span class="nl">title</span><span class="p">:</span> <span class="kr">string</span><span class="p">;</span>
  <span class="nl">content</span><span class="p">:</span> <span class="kr">string</span><span class="p">;</span>
<span class="p">}</span>
<span class="kr">interface</span> <span class="nx">TestData</span> <span class="p">{</span>
  <span class="nl">returnData</span><span class="p">:</span> <span class="nx">DataTest</span><span class="p">[];</span>
<span class="p">}</span>

<span class="kd">const</span> <span class="nx">Home</span> <span class="o">=</span> <span class="p">({</span> <span class="nx">returnData</span> <span class="p">}:</span> <span class="nx">TestData</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="k">return</span> <span class="p">(</span>
    <span class="p">&lt;</span><span class="nc">Layout</span> <span class="na">home</span><span class="p">=</span><span class="si">{</span><span class="kc">true</span><span class="si">}</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nc">Head</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">title</span><span class="p">&gt;</span><span class="si">{</span><span class="nx">siteTitle</span><span class="si">}</span><span class="p">&lt;/</span><span class="nt">title</span><span class="p">&gt;</span>
      <span class="p">&lt;/</span><span class="nc">Head</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nc">Link</span> <span class="na">href</span><span class="p">=</span><span class="s">"/posts/first-post"</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">a</span><span class="p">&gt;</span>To go first Post<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;</span>
      <span class="p">&lt;/</span><span class="nc">Link</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">section</span> <span class="na">className</span><span class="p">=</span><span class="si">{</span><span class="nx">utilStyles</span><span class="p">.</span><span class="nx">headingMd</span><span class="si">}</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>Hello There<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>This is Sample Website<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>
          <span class="p">&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="p">=</span><span class="s">"https://nextjs.org/learn"</span><span class="p">&gt;</span>our Next.js tutorial<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;</span>.
        <span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
      <span class="p">&lt;/</span><span class="nt">section</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">section</span> <span class="na">className</span><span class="p">=</span><span class="si">{</span><span class="nx">utilStyles</span><span class="p">.</span><span class="nx">headingMd</span><span class="si">}</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">ul</span><span class="p">&gt;</span>
          <span class="si">{</span><span class="nx">returnData</span><span class="p">?.</span><span class="nx">map</span><span class="p">((</span><span class="nx">el</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">(</span>
            <span class="p">&lt;</span><span class="nt">li</span> <span class="na">key</span><span class="p">=</span><span class="si">{</span><span class="nx">el</span><span class="p">.</span><span class="nx">date</span><span class="si">}</span><span class="p">&gt;</span>
              <span class="si">{</span><span class="nx">el</span><span class="p">.</span><span class="nx">date</span><span class="si">}</span> <span class="p">&lt;</span><span class="nt">br</span> <span class="p">/&gt;</span>
              <span class="si">{</span><span class="nx">el</span><span class="p">.</span><span class="nx">title</span><span class="si">}</span> <span class="p">&lt;</span><span class="nt">br</span> <span class="p">/&gt;</span>
              <span class="si">{</span><span class="nx">el</span><span class="p">.</span><span class="nx">content</span><span class="si">}</span>
            <span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
          <span class="p">))</span><span class="si">}</span>
        <span class="p">&lt;/</span><span class="nt">ul</span><span class="p">&gt;</span>
      <span class="p">&lt;/</span><span class="nt">section</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nc">Layout</span><span class="p">&gt;</span>
  <span class="p">);</span>
<span class="p">};</span>

<span class="c1">//https://nextjs.org/learn/basics/data-fetching/getstaticprops-details</span>
<span class="k">export</span> <span class="k">async</span> <span class="kd">function</span> <span class="nx">getStaticProps</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="p">{</span> <span class="nx">data</span> <span class="p">}:</span> <span class="nx">AxiosResponse</span><span class="o">&lt;</span><span class="p">{</span> <span class="na">data</span><span class="p">:</span> <span class="nx">TestData</span> <span class="p">}</span><span class="o">&gt;</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">axios</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span>
    <span class="dl">"</span><span class="s2">http://localhost:4000/images/test</span><span class="dl">"</span>
  <span class="p">);</span>

  <span class="kd">const</span> <span class="nx">returnData</span> <span class="o">=</span> <span class="nx">data</span><span class="p">.</span><span class="nx">data</span><span class="p">;</span>

  <span class="k">return</span> <span class="p">{</span>
    <span class="na">props</span><span class="p">:</span> <span class="p">{</span>
      <span class="nx">returnData</span><span class="p">,</span>
    <span class="p">},</span>
  <span class="p">};</span>
<span class="p">}</span>

<span class="k">export</span> <span class="k">default</span> <span class="nx">Home</span><span class="p">;</span>
</pre></table></code></div></div><blockquote><p>getStaticProps 예시</p></blockquote><h2 id="22-server-side-rendering">2.2 Server-side Rendering</h2><div lang="tsx" class="language-tsx highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
</pre><td class="rouge-code"><pre><span class="k">import</span> <span class="nx">axios</span><span class="p">,</span> <span class="p">{</span> <span class="nx">AxiosResponse</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">axios</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">GetServerSideProps</span><span class="p">,</span> <span class="nx">InferGetServerSidePropsType</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">next</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="nx">Head</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">next/head</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="nx">Link</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">next/link</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="nx">Layout</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">../../components/layout</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="nx">utilStyles</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">../../styles/utils.module.css</span><span class="dl">"</span><span class="p">;</span>

<span class="kr">interface</span> <span class="nx">DataTest</span> <span class="p">{</span>
  <span class="nl">date</span><span class="p">:</span> <span class="kr">string</span><span class="p">;</span>
  <span class="nl">title</span><span class="p">:</span> <span class="kr">string</span><span class="p">;</span>
  <span class="nl">content</span><span class="p">:</span> <span class="kr">string</span><span class="p">;</span>
<span class="p">}</span>
<span class="kr">interface</span> <span class="nx">TestData</span> <span class="p">{</span>
  <span class="nl">data</span><span class="p">:</span> <span class="nx">DataTest</span><span class="p">[];</span>
<span class="p">}</span>

<span class="kd">const</span> <span class="nx">FirstPost</span> <span class="o">=</span> <span class="p">({</span>
  <span class="nx">data</span><span class="p">,</span>
<span class="p">}:</span> <span class="nx">InferGetServerSidePropsType</span><span class="o">&lt;</span><span class="k">typeof</span> <span class="nx">getServerSideProps</span><span class="o">&gt;</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="k">return</span> <span class="p">(</span>
    <span class="p">&lt;</span><span class="nc">Layout</span> <span class="na">home</span><span class="p">=</span><span class="si">{</span><span class="kc">false</span><span class="si">}</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nc">Head</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">title</span><span class="p">&gt;</span>First Post!<span class="p">&lt;/</span><span class="nt">title</span><span class="p">&gt;</span>
      <span class="p">&lt;/</span><span class="nc">Head</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">h1</span><span class="p">&gt;</span>First Post!<span class="p">&lt;/</span><span class="nt">h1</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">h2</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nc">Link</span> <span class="na">href</span><span class="p">=</span><span class="s">"/"</span><span class="p">&gt;</span>
          <span class="p">&lt;</span><span class="nt">a</span><span class="p">&gt;</span> Back to HOme<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;</span>
        <span class="p">&lt;/</span><span class="nc">Link</span><span class="p">&gt;</span>
      <span class="p">&lt;/</span><span class="nt">h2</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">section</span> <span class="na">className</span><span class="p">=</span><span class="si">{</span><span class="nx">utilStyles</span><span class="p">.</span><span class="nx">headingMd</span><span class="si">}</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">ul</span><span class="p">&gt;</span>
          <span class="si">{</span><span class="nx">data</span><span class="p">?.</span><span class="nx">map</span><span class="p">((</span><span class="nx">el</span><span class="p">:</span> <span class="nx">DataTest</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">(</span>
            <span class="p">&lt;</span><span class="nt">li</span> <span class="na">key</span><span class="p">=</span><span class="si">{</span><span class="nx">el</span><span class="p">.</span><span class="nx">date</span><span class="si">}</span><span class="p">&gt;</span>
              <span class="si">{</span><span class="nx">el</span><span class="p">.</span><span class="nx">date</span><span class="si">}</span> <span class="p">&lt;</span><span class="nt">br</span> <span class="p">/&gt;</span>
              <span class="si">{</span><span class="nx">el</span><span class="p">.</span><span class="nx">title</span><span class="si">}</span> <span class="p">&lt;</span><span class="nt">br</span> <span class="p">/&gt;</span>
              <span class="si">{</span><span class="nx">el</span><span class="p">.</span><span class="nx">content</span><span class="si">}</span>
            <span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
          <span class="p">))</span><span class="si">}</span>
        <span class="p">&lt;/</span><span class="nt">ul</span><span class="p">&gt;</span>
      <span class="p">&lt;/</span><span class="nt">section</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nc">Layout</span><span class="p">&gt;</span>
  <span class="p">);</span>
<span class="p">};</span>

<span class="k">export</span> <span class="kd">const</span> <span class="nx">getServerSideProps</span><span class="p">:</span> <span class="nx">GetServerSideProps</span> <span class="o">=</span> <span class="k">async</span> <span class="p">(</span><span class="nx">context</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="na">res</span><span class="p">:</span> <span class="nx">AxiosResponse</span><span class="o">&lt;</span><span class="p">{</span> <span class="na">data</span><span class="p">:</span> <span class="nx">TestData</span> <span class="p">}</span><span class="o">&gt;</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">axios</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span>
    <span class="dl">"</span><span class="s2">http://localhost:4000/images/test</span><span class="dl">"</span>
  <span class="p">);</span>
  <span class="kd">const</span> <span class="nx">data</span> <span class="o">=</span> <span class="nx">res</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">data</span><span class="p">;</span>

  <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">{</span>
      <span class="na">redirect</span><span class="p">:</span> <span class="p">{</span>
        <span class="na">destination</span><span class="p">:</span> <span class="dl">"</span><span class="s2">/</span><span class="dl">"</span><span class="p">,</span>
        <span class="na">permanent</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
      <span class="p">},</span>
    <span class="p">};</span>
  <span class="p">}</span>

  <span class="k">return</span> <span class="p">{</span>
    <span class="na">props</span><span class="p">:</span> <span class="p">{</span> <span class="nx">data</span> <span class="p">},</span>
  <span class="p">};</span>
<span class="p">};</span>

<span class="k">export</span> <span class="k">default</span> <span class="nx">FirstPost</span><span class="p">;</span>
</pre></table></code></div></div><h1 id="3-결론">3. 결론</h1><p>기본적으로 필요한 CSS, REST-API 받는방식 및 관련 개념을 정리해보았다.</p><p>SWR같은경우는 세팅을하고 컴포넌트를 작성하면서 다시한번 샘플을 해당 포스팅에 남겨보아야겠다.</p><p>이제 다음편에 해야할 것은 <a href="https://github.com/vercel/next.js/tree/canary/examples">이 링크</a>를 통해 apollo-client를 연결하여</p><p>graphql/ apollo/ apollo-client을 세팅하는 방법을 공부하며 포스팅해보겠다</p><h2 id="참고">참고</h2><ul><li><a href="https://nextjs.org/learn/basics/data-fetching/request-time">Fetching Data at Request Time</a><li><a href="https://nextjs.org/learn/basics/data-fetching/getstaticprops-details">getStaticProps Details</a></ul></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/fe/'>FE</a>, <a href='/categories/next-js/'>Next JS</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/next-js/" class="post-tag no-text-decoration" >Next JS</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=Next JS를 공부해보자[1편] - Sanghun Lee&url=https://sanghunlee-711.github.io//posts/nextjs_basic/" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=Next JS를 공부해보자[1편] - Sanghun Lee&u=https://sanghunlee-711.github.io//posts/nextjs_basic/" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://telegram.me/share?text=Next JS를 공부해보자[1편] - Sanghun Lee&url=https://sanghunlee-711.github.io//posts/nextjs_basic/" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <i class="fa-fw fas fa-link small" onclick="copyLink('', 'Link copied successfully!')" data-toggle="tooltip" data-placement="top" title="Copy link"> </i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted topbar-down"><div class="access"><div id="access-lastmod" class="post"> <span>Recent Update</span><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/refactoring-2/">리액트에서 비즈니스 로직을 나눠보자[2 - Hooks 를 테스트 해보자]</a><li><a href="/posts/refactoring-1/">리액트에서 비즈니스 로직을 나눠보자[1 - 비즈니스로직 분리]</a><li><a href="/posts/webpack2/">Webpack과 React를 사용하여 Custome Element 만들기[2 - 웹팩(플러그인)]</a><li><a href="/posts/webpack3/">Webpack과 React를 사용하여 Custome Element 만들기[3 - 커스텀엘리먼트 렌더]</a><li><a href="/posts/nextjs_basic/">Next JS를 공부해보자[1편]</a></ul></div><div id="access-tags"> <span>Trending Tags</span><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/architecture/">Architecture</a> <a class="post-tag" href="/tags/webpack/">Webpack</a> <a class="post-tag" href="/tags/next-js/">Next JS</a> <a class="post-tag" href="/tags/algorithm/">Algorithm</a> <a class="post-tag" href="/tags/cors/">Cors</a> <a class="post-tag" href="/tags/cypress/">Cypress</a> <a class="post-tag" href="/tags/fe-test/">FE Test</a> <a class="post-tag" href="/tags/jest/">Jest</a> <a class="post-tag" href="/tags/msw/">msw</a> <a class="post-tag" href="/tags/prefilght/">Prefilght</a></div></div></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"> <span class="pl-3 pt-2 mb-2">Contents</span><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div class="col-12 col-lg-11 col-xl-8"><div id="post-extend-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/nextjs_user/"><div class="card-body"> <span class="timeago small" >Oct 6, 2021<i class="unloaded">2021-10-06T12:33:00+09:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Next JS를 공부해보자[2편-Auth]</h3><div class="text-muted small"><p> Next JS 사용하는 이유 1편을 통한 간단한 개념잡기 이후에 Next js, Apollo-client 조합으로 쿼리를 이용할 수 있는 훅(useQuery 등)을 활용하여 로그인 로그아웃을 구현해보자! 1. 세팅 일단 기본적으로 next-apollo 의 샘플 깃헙 코드를 통해 대부분의 세팅을 진행하였고 추가적으로 link를 설정해서 헤더만 잡...</p></div></div></a></div><div class="card"> <a href="/posts/webpack2/"><div class="card-body"> <span class="timeago small" >Sep 18, 2021<i class="unloaded">2021-09-18T12:33:00+09:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Webpack과 React를 사용하여 Custome Element 만들기[2 - 웹팩(플러그인)]</h3><div class="text-muted small"><p> Webpack 1. 사용한 플러그인(plugins) 플러그인은 번들된 파일을 처리하기 위해 사용하는 것이다. 각 플러그인의 개념은 간단하게 적고 넘어가겠다. 1.1 CleanWebpackPlugin 이 플러그인은 출력 Path(output)으로 정해놓은 것의 모든파일을 지워주고 리빌드 완료 후 사용되지않는 이미지 파일등의 webpack asse...</p></div></div></a></div><div class="card"> <a href="/posts/webpack3/"><div class="card-body"> <span class="timeago small" >Sep 24, 2021<i class="unloaded">2021-09-24T12:33:00+09:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Webpack과 React를 사용하여 Custome Element 만들기[3 - 커스텀엘리먼트 렌더]</h3><div class="text-muted small"><p> 커스템 엘리먼츠 1. 서론 앞서 2편을 통해 웹팩 세팅을 하며 모든 파일을 하나의 js파일로 번들링할 수 있게 되었다. 그래서 마지막 rendering에 관한 로직만 추가하면 마지막 스텝이 마무리가 된다! 기존에 회사에서 사용하던 컴포넌트집합들 중 일부를 하나의 js파일로 번들링하여 외부에서 해당 커스텀엘리먼츠를 선언하고 script태그를 통해...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/webpack3/" class="btn btn-outline-primary" prompt="Older"><p>Webpack과 React를 사용하여 Custome Element 만들기[3 - 커스텀엘리먼트 렌더]</p></a> <a href="/posts/FETest/" class="btn btn-outline-primary" prompt="Newer"><p>Jest, Cypress로 FE를 테스트해보자</p></a></div></div></div></div><footer class="d-flex w-100 justify-content-center"><div class="d-flex justify-content-between align-items-center"><div class="footer-left"><p class="mb-0"> © 2022 <a href="https://github.com/sanghunlee-711">Sanghun lee</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0"> Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> theme.</p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><h4 class="text-muted mb-4">Trending Tags</h4><a class="post-tag" href="/tags/architecture/">Architecture</a> <a class="post-tag" href="/tags/webpack/">Webpack</a> <a class="post-tag" href="/tags/next-js/">Next JS</a> <a class="post-tag" href="/tags/algorithm/">Algorithm</a> <a class="post-tag" href="/tags/cors/">Cors</a> <a class="post-tag" href="/tags/cypress/">Cypress</a> <a class="post-tag" href="/tags/fe-test/">FE Test</a> <a class="post-tag" href="/tags/jest/">Jest</a> <a class="post-tag" href="/tags/msw/">msw</a> <a class="post-tag" href="/tags/prefilght/">Prefilght</a></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><script src="https://cdn.jsdelivr.net/npm/mermaid@8/dist/mermaid.min.js"></script> <script> $(function() { let initTheme = "default"; if ($("html[mode=dark]").length > 0 || ($("html[mode]").length == 0 && window.matchMedia("(prefers-color-scheme: dark)").matches ) ) { initTheme = "dark"; } let mermaidConf = { theme: initTheme /* <default|dark|forest|neutral> */ }; /* Markdown converts to HTML */ $("pre").has("code.language-mermaid").each(function() { let svgCode = $(this).children().html(); $(this).addClass("unloaded"); $(this).after(`<div class=\"mermaid\">${svgCode}</div>`); }); mermaid.initialize(mermaidConf); }); </script><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="https://sanghunlee-711.github.io/{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script src="https://cdn.jsdelivr.net/combine/npm/lozad/dist/lozad.min.js,npm/magnific-popup@1/dist/jquery.magnific-popup.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script> /* see: <https://docs.mathjax.org/en/latest/options/input/tex.html#tex-options> */ MathJax = { tex: { inlineMath: [ /* start/end delimiter pairs for in-line math */ ['$','$'], ['\\(','\\)'] ], displayMath: [ /* start/end delimiter pairs for display math */ ['$$', '$$'], ['\\[', '\\]'] ] } }; </script> <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script> <script type="text/javascript" id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"> </script> <script src="https://cdn.jsdelivr.net/combine/npm/popper.js@1.16.1,npm/bootstrap@4/dist/js/bootstrap.min.js"></script> <script defer src="/app.js"></script> <script defer src="https://www.googletagmanager.com/gtag/js?id="></script> <script> document.addEventListener("DOMContentLoaded", function(event) { window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', ''); }); </script>
